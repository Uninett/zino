Avoid potential state corruption issues by saving the running state to a temporary file before overwriting the existing state file
